<!--_______________________________________________________________________________________________________________________
	Name:			LCFGrants.page
	Description:	Access to LCF Grants
					
	Date         Version Author      		Summary of Changes 
	___________  _______ _________________	________________________________________________________________________________
	Apr 2018     1.0     Michael Witchalls	Initial Release 
________________________________________________________________________________________________________________________ -->  
<apex:page standardController="Application__c" extensions="LCFGrantsController" standardStylesheets="false" showHeader="false" docType="html-5.0" action="{!newGrantAction}">
	<apex:composition template="Layout">
		<apex:define name="title"> 
		    <title>LCF Grants</title> 
		</apex:define>
		<apex:define name="breadcrumbs">
		</apex:define>
		<apex:define name="mainFullWidth">
			
			<div class="grid-row">
				<div class="column-two-thirds">
               		<h1 class="heading-large">Grant Management</h1>
					<p>If you need assistance with any of these online forms, you can email <a href="mailto:lifechancesfund@biglotteryfund.org.uk">lifechancesfund@biglotteryfund.org.uk</a> or call 03454 102030<br/>(Text relay: 18001 plus 0345 4 10 20 30 for those with a hearing or speech impairment). </p>
                </div>
                <div class="column-third">
					<aside class="govuk-related-items" role="complementary">
        				<h2 class="heading-medium" id="subsection-title">Navigation Links</h2>
       					<nav role="navigation" aria-labelledby="subsection-title">
						<ul class="font-small">
							<apex:outputText rendered="{!customerUser==false}">
				            <li>
				            <apex:outputLink value="/officeusers">
							    Home
							</apex:outputLink>
							</li>
							</apex:outputText>
							<apex:outputText rendered="{!ISBLANK(idString)}">
					            <li>
					            <apex:outputLink value="{!$Page.Applications}">
								    Applications
								</apex:outputLink>
								</li>
							</apex:outputText>
							<apex:outputText rendered="{!NOT(ISBLANK(idString))}">
					            <li>
					            <apex:outputLink value="{!$Page.Applications}">
								    Applications
								    <apex:param name="id" value="{!idString}"/>				    
								</apex:outputLink>
								</li>
							</apex:outputText>
							<apex:outputText rendered="{!AND(customerUser==false,NOT(ISBLANK(idString)))}">
				            <li>
				            <apex:outputLink value="{!$Page.LCFGrantHistory}">
							    Payment profile history
							    <apex:param name="form" value="lcf_grant_payment_profile_1"/>
							    <apex:param name="grant" value="{!thisGrant['Name']}"/>	
							    <apex:param name="id" value="{!idString}"/>				    
							</apex:outputLink>
							</li>
							</apex:outputText>
							<apex:outputText rendered="{!NOT(ISBLANK(idString))}">
				            <li>
				            <apex:outputLink value="{!$Page.LCFGrantHistory}">
							    Outcome achievements<br/>and payment claim history
							    <apex:param name="form" value="lcf_grant_achievement_1"/>
							    <apex:param name="grant" value="{!thisGrant['Name']}"/>	
							    <apex:param name="id" value="{!idString}"/>				    
							</apex:outputLink>
							</li>
							</apex:outputText>
							<apex:outputText rendered="{!NOT(ISBLANK(idString))}">
				            <li>
				            <apex:outputLink value="{!$Page.LCFGrantHistory}">
							    Annual monitoring history
							    <apex:param name="form" value="lcf_grant_annual_monitor_1"/>
							    <apex:param name="grant" value="{!thisGrant['Name']}"/>	
							    <apex:param name="id" value="{!idString}"/>				    
							</apex:outputLink>
							</li>
							</apex:outputText>
						</ul>
				        </nav>
      				</aside>                
      			</div>
            </div>
            <div class="grid-row">
				<div class="column-two-thirds">
                	<table class="applications">
						<thead>
							<tr>
								<th scope="col">Theme</th>
								<th>&nbsp;</th>
								<th scope="col">Stage</th>
								<th class="numeric" scope="col">Status</th>
							</tr>
						</thead>
						<tbody>
							<apex:repeat value="{!grants}" var="grant">
								<tr>
									<th scope="row" class="app-identifier">
										{!grant['Theme__c']}
									</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="{!$Page.LCFGrantBlock}">
										    Offer letter baseline
										    <apex:param name="form" value="lcf_grant_baseline_1"/>
										    <apex:param name="app" value="{!grant['Application_ID__c']}"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>									    
										</apex:outputLink>
									</td>
									<td class="numeric"><span class="status">
										{!UPPER(grant['bb_block_status__c'])}
									</span></td>
								</tr>
								<tr>
									<th scope="row" class="app-identifier">
										<span style="font-weight:bold">Application</span>
										<span style="float:right">{!grant['Application_ID__c']}</span>
									</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="{!$Page.LCFGrantBlock}">
										    Payment profile
										    <apex:param name="form" value="lcf_grant_payment_profile_1"/>
										    <apex:param name="app" value="{!grant['Application_ID__c']}"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td class="numeric"><span class="status">
										{!UPPER(grant['pp_block_status__c'])}
									</span></td>
								</tr>
								<tr>
									<th scope="row" class="app-identifier">
										<span style="font-weight:bold">Grant Ref.</span>
										<span style="float:right">{!grant['Name']}</span>
									</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="{!$Page.LCFGrantBlock}">
										    Outcome achievement
										    <apex:param name="form" value="lcf_grant_achievement_1"/>
										    <apex:param name="app" value="{!grant['Application_ID__c']}"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td class="numeric"><span class="status">
										{!UPPER(grant['ab_block_status__c'])}
									</span></td>
								</tr>
								<apex:outputText rendered="{!customerUser==false}">
								<tr>
									<th scope="row" class="app-identifier">&nbsp;</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="#">
										    Outcome achievement<br/>follow-up
										    <apex:param name="form" value="lcf_grant_baseline_1"/>
										    <apex:param name="app" value="{!grant['Application_ID__c']}"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td>&nbsp;</td>
								</tr>
								</apex:outputText>
								<tr>
									<th scope="row" class="app-identifier">&nbsp;</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="{!$Page.LCFGrantBlock}">
										    Annual monitoring
										    <apex:param name="form" value="lcf_grant_annual_monitor_1"/>
										    <apex:param name="app" value="{!grant['Application_ID__c']}"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td class="numeric"><span class="status">
										{!UPPER(grant['am_block_status__c'])}
									</span></td>
								</tr>
								<apex:outputText rendered="{!customerUser==false}">
								<tr>
									<th scope="row" class="app-identifier">&nbsp;</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="#">
										    Annual monitoring<br/>follow-up
										    <apex:param name="form" value="lcf_grant_baseline_1"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td>&nbsp;</td>
								</tr>
								</apex:outputText>
								<apex:outputText rendered="{!customerUser==false}">
								<tr>
									<th scope="row" class="app-identifier">&nbsp;</th>
									<td style="border:none">&nbsp;</td>
									<td class="form-identifier">
										<apex:outputLink value="#">
										    End of grant follow-up
										    <apex:param name="form" value="lcf_grant_baseline_1"/>
										    <apex:param name="grant" value="{!grant['Name']}"/>
										</apex:outputLink>
									</td>
									<td>&nbsp;</td>
								</tr>
								</apex:outputText>
								<tr><td>&nbsp;</td><td></td><td></td><td></td></tr>
							</apex:repeat>
						</tbody>
					</table>

				</div>
			</div>

		</apex:define>
	</apex:composition>
</apex:page>